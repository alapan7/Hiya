<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Favorite Person ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    
    <style>
        /* --- Reset & Core Styles --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html {
            height: 100%;
            overflow: hidden;
            font-family: 'Poppins', sans-serif; /* A nice modern font if available, falls back to sans-serif */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- Background with Photo & Blur --- */
        .bg-image {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('us.jpg'); /* CHANGE THIS TO YOUR IMAGE NAME */
            background-size: cover;
            background-position: center;
            filter: blur(8px) brightness(0.8); /* Adjust blur and brightness here */
            transform: scale(1.1); /* Prevents white edges from blur */
            z-index: -2;
        }

        .bg-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(255,182,193,0.3) 0%, rgba(255,255,255,0.1) 100%);
            z-index: -1;
        }

        /* --- Glassmorphism Card --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            padding: 40px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            z-index: 10;
            animation: cardFloatIn 1s ease-out;
            transition: all 1s ease; /* Smooth transition when changing height */
        }

        h1 { color: #880e4f; font-size: 2.2rem; margin-bottom: 15px; text-shadow: 1px 1px 2px rgba(255,255,255,0.5); }
        p { color: #444; font-size: 1.1rem; line-height: 1.6; margin-bottom: 25px; }
        em { color: #d81b60; font-weight: bold; font-style: normal; }

        /* --- Buttons --- */
        .btn-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        #yesBtn {
            background-color: #ff4d6d;
            color: white;
        }

        #yesBtn:hover {
            background-color: #ff758f;
            transform: translateY(-3px) scale(1.05);
        }

        #noBtn {
            background-color: #f8bbd0;
            color: #880e4f;
            position: relative; /* Crucial for moving */
        }

        /* --- Surprise/Promise Section --- */
        #surpriseSection { display: none; text-align: center; }

        .promise-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .promise-card {
            background: rgba(255, 255, 255, 0.6);
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 77, 109, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            text-align: left;
        }

        .promise-card:hover {
            background: rgba(255, 77, 109, 0.2);
            transform: scale(1.02);
        }

        .promise-card.accepted {
            background: #ffcbd1;
            border-color: #ff4d6d;
        }

        .promise-card span { font-size: 1.5rem; }
        .promise-card p { margin: 0; font-size: 0.9rem; color: #333; }

        /* --- The Final Surprise Photo! --- */
        #finalSurprise {
            display: none;
            text-align: center;
            animation: photoSurpriseIn 1.5s ease-out; /* New entrance animation */
        }

        .final-photo-container {
            margin: 20px auto;
            border: 8px solid white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 350px; /* Adjust size as needed */
            overflow: hidden; /* Important for the border-radius */
        }

        .final-photo-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* --- Background Animations (Hearts) --- */
        @keyframes bubbles {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; }
        }

        .heart {
            position: fixed;
            bottom: -100px;
            background-color: rgba(255, 77, 109, 0.6);
            border-radius: 50%; /* Start as circles, change in CSS if you want heart shape */
            animation: bubbles 10s linear infinite;
            z-index: -1;
        }

        /* --- Keyframes for Animations --- */
        @keyframes cardFloatIn {
            0% { transform: translateY(50px) scale(0.9); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }

        @keyframes photoSurpriseIn {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="bg-image"></div>
    <div class="bg-overlay"></div>
    <div id="heartsContainer"></div>

    <div class="glass-card" id="mainCard">
        
        <div id="askSection">
            <h1>Hey Hiya...</h1>
            <p>I feel awful about what happened. My mistake was stupid and the last thing I ever want to do is hurt you.</p>
            <p>You mean the world to me. Can you *please* forgive me?</p>
            <div class="btn-container">
                <button class="btn" id="yesBtn" onclick="acceptApology()">Yes, I Forgive You ‚ù§Ô∏è</button>
                <button class="btn" id="noBtn" onmouseover="moveNoButton()">No üò§</button>
            </div>
        </div>

        <div id="surpriseSection">
            <h1>Thank You for Listening ‚ù§Ô∏è</h1>
            <p>I feel so much better knowing we're okay. I want to make sure we stay this way.</p>
            
            <div class="promise-container">
                <p style="font-weight: bold; color: #880e4f;">Can we make these three promises?</p>
                
                <div class="promise-card" onclick="checkPromise(this)">
                    <span>ü§ù</span>
                    <p>I promise to tell you what's wrong instead of ignoring you.</p>
                </div>

                <div class="promise-card" onclick="checkPromise(this)">
                    <span>üì±</span>
                    <p>I promise to always reply, even if it's just to say I need space.</p>
                </div>

                <div class="promise-card" onclick="checkPromise(this)">
                    <span>‚ù§Ô∏è</span>
                    <p>I promise to always remember how much we care about each other.</p>
                </div>
            </div>
        </div>

        <div id="finalSurprise">
            <h1 style="color: #d81b60;">Everything Is Okay Now!</h1>
            <div class="final-photo-container">
                <img src="Hiya.jpeg" alt="Our Picture">
            </div>
            <p style="color: #444; font-size: 1.1rem;">I love you. Let's talk? ‚ú®</p>
        </div>

        

    </div>

    <script>
        // --- 1. Background Heart Animation ---
        function createHeart() {
            const container = document.getElementById('heartsContainer');
            const heart = document.createElement('div');
            heart.classList.add('heart');
            
            // Randomize size, position, and duration
            const size = Math.random() * 20 + 10 + 'px';
            heart.style.width = size;
            heart.style.height = size;
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 5 + 5 + 's'; // 5 to 10s

            container.appendChild(heart);
            setTimeout(() => heart.remove(), 10000); // Remove after animation
        }
        setInterval(createHeart, 300); // Create a new heart every 300ms

        const noBtn = document.getElementById('noBtn');

function moveNoButton(event) {
    // If it's a touch event, prevent it from acting like a 'click'
    if (event) {
        event.preventDefault();
    }

    // Calculate available space, keeping the button within the screen padding
    const padding = 50;
    const maxX = window.innerWidth - noBtn.offsetWidth - padding;
    const maxY = window.innerHeight - noBtn.offsetHeight - padding;

    // Generate random coordinates
    const randomX = Math.floor(Math.random() * maxX);
    const randomY = Math.floor(Math.random() * maxY);

    // Apply new position
    noBtn.style.position = 'fixed';
    noBtn.style.left = randomX + 'px';
    noBtn.style.top = randomY + 'px';
    noBtn.style.zIndex = '999'; // Ensure it stays above everything
}

        // --- 3. First Acceptance Logic (Confetti + Reveal Promises) ---
        function acceptApology() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });

            document.getElementById('askSection').style.display = 'none';
            document.getElementById('surpriseSection').style.display = 'block';
        }

        // --- 4. Promise Check and Final Photo Reveal ---
        let promisesAccepted = 0;
        function checkPromise(element) {
            if (!element.classList.contains('accepted')) {
                element.classList.add('accepted');
                // Use a proper green checkmark emoji
                const checkmark = document.createElement('span');
                checkmark.innerText = " ‚úÖ";
                checkmark.style.marginLeft = "auto"; // Push it to the right
                checkmark.style.fontSize = "1.2rem";
                element.appendChild(checkmark);
                promisesAccepted++;
                
                // Little sparkle effect for each promise
                confetti({
                    particleCount: 30,
                    spread: 50,
                    origin: { y: 0.8 },
                    colors: ['#ff4d6d', '#ffccd5']
                });

                if (promisesAccepted === 3) {
                    // Start the final transition
                    revealFinalPhoto();
                }
            }
        }

        // --- 5. The Grand Finale: Show the Photo! ---
        function revealFinalPhoto() {
            // Give a tiny delay so she sees the third checkmark
            setTimeout(() => {
                // Hide the promise section
                document.getElementById('surpriseSection').style.display = 'none';
                
                // Show the final photo section
                document.getElementById('finalSurprise').style.display = 'block';
                
                // Optional: Big confetti blast for the end!
                let duration = 3 * 1000;
                let animationEnd = Date.now() + duration;
                let defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

                function randomInRange(min, max) {
                    return Math.random() * (max - min) + min;
                }

                let interval = setInterval(function() {
                    let timeLeft = animationEnd - Date.now();

                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }

                    let particleCount = 50 * (timeLeft / duration);
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
                }, 250);

            }, 800); // 800ms delay after the 3rd check
        }
    </script>
</body>
</html>
